<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
</head>
<body>

<b> Register Host Description </b><br/>

Application Name    *: <input type="text" id="appName1" name="appName" value="EchoLocal" size="50"><br/>
Executable location *: <input type="text" id="exeuctableLocation1" name="exeuctableLocation" value="/bin/echo" size="50"><br/>
Scratch Working Dir.*: <input type="text" id="scratchWorkingDirectory1" name="scratchWorkingDirectory" value="/scratch/01437/ogce/test" size="50"><br/>

Host Name           *: <input type="text" name="hostName" id="hostName1" size="75"><br/>

Project Acc. number  : <input type="text" id="projAccNumber1" name="projAccNumber" value="TG-STA110014S" size="50"><br/>
Queue Name           : <input type="text" id="queueName1" name="queueName" value="development" size="50"><br/>
CPU count            : <input type="text" id="cpuCount1" name="cpuCount" value="1" size="50"><br/>
Node count           : <input type="text" id="nodeCount1" name="nodeCount" value="1" size="50"><br/>
Max memory           : <input type="text" id="maxMemory1" name="maxMemory" value="100" size="50"><br/>

<b>SERVICE</b><br/>
Service Name        *: <input type="text" id="serviceName1" name="serviceName" value="SimpleEcho" size="50"><br/>
Input Name          *: <input type="text" id="inputName1" name="inputName1" value="echo_input" size="50"><br/>
Input Type          *: <input type="text" id="inputType1" name="inputType1" value="String" size="50"><br/>
<p1>Add inputs</p1><br/>

Output Name         *: <input type="text" id="outputName1" name="outputName1" value="echo_output" size="50"><br/>
Output Type         *: <input type="text" id="outputType1" name="outputType1" value="String" size="50"><br/>
<p2>Add outputs</p2><br/>


<button name="btn2">Save Application</button>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script>
    function xmlToString(xml) {
        var xmlData = $(xml);
        var xmlString;
        if (window.ActiveXObject) {
            xmlString = xmlData.xml;
        } else {
            var oSerializer = new XMLSerializer();
            xmlString = oSerializer.serializeToString(xmlData[0]);
        }
        console.log(xmlString);
        return xmlString;
    }

    $(document).ready(function(){
        var inputCount = 0;
        var outputCount = 0;

        $("p2").click(function(){
            $(this).hide();
            $(this).after("<p>Another paragraph!</p>");
        });

        $("p1").live("click", function(){
            inputCount++;
            alert("p1 clicked");
            alert(inputCount);
            $(this).after("Input Name         *:");
//            $(this).after("<input type="text" id="inputName1" name="inputName" value="echo_input" size="50"><br/>");
            $(this).after("&lt;input type=&quot;text&quot; id=&quot;inputName" + inputCount + "&quot; name=&quot;inputName" + inputCount + "&quot; value=&quot;echo_input&quot; size=&quot;50&quot;&gt;&lt;br/&gt;");

            $(this).after("Input Type         *:");
//            $(this).after("<input type="text" id="inputType1" name="inputType" value="String" size="50"><br/>");
            $(this).after("&lt;input type=&quot;text&quot; id=&quot;inputType" + inputCount + "&quot; name=&quot;inputType" + inputCount + "&quot; value=&quot;String&quot; size=&quot;50&quot;&gt;&lt;br/&gt;");
        });

        $("p2").live("click", function(){
            outputCount++;
            alert("p2 clicked");
            alert(outputCount);
            $(this).after("Output Name         *:");
//            $(this).after("<input type="text" id="outputName1" name="outputName1" value="echo_output" size="50"><br/>");
            $(this).after("&lt;input type=&quot;text&quot; id=&quot;outputName" + outputCount + "&quot; name=&quot;outputName" + outputCount + "&quot; value=&quot;echo_output&quot; size=&quot;50&quot;&gt;&lt;br/&gt;");

            $(this).after("Output Type         *:");
//            $(this).after("<input type="text" id="outputType1" name="outputType1" value="String" size="50"><br/>");
            $(this).after("&lt;input type=&quot;text&quot; id=&quot;outputType" + outputCount + "&quot; name=&quot;outputType" + outputCount + "&quot; value=&quot;String&quot; size=&quot;50&quot;&gt;&lt;br/&gt;");
        });

//        $(window).load(function () {
//            $("div").hide();
//        });
//
//        $("select[name='drop1']").change(function() {
//            //alert($(this).val());
//            if("Local" == $(this).val()) {
//                $("div").hide();
//            } else {
//                $("div").show();
//            }
//        });

        $('[name="btn2"]').click(function(){
            alert($(this).val());
            alert("btn2 clicked");
            var appName = $("#appName1").val();
            var exeuctableLocation = $("#exeuctableLocation1").val();
            var scratchWorkingDirectory = $("#scratchWorkingDirectory1").val();
            var hostName = $("#hostName1").val();
            //alert($(this).val());

            var projAccNumber = $("#projAccNumber1").val();
            var queueName = $("#queueName1").val();
            var cpuCount = $("#cpuCount1").val();
            var nodeCount = $("#nodeCount1").val();
            var maxMemory = $("#maxMemory1").val();

            var serviceName = $("#serviceName1").val();
            var inputName1 = $("#inputName1").val();
            var inputType1 = $("#inputType1").val();
            var outputName = $("#outputName1").val();
            var outputType = $("#outputType1").val();

//            var xml = $('<type:hostDescription xmlns:type="http://schemas.airavata.apache.org/gfac/type"><type:hostName>' + hostName + '</type:hostName><type:hostAddress>' + hostAddress + '</type:hostAddress></type:hostDescription>');
//            var xmlData= $(xml);
//            var xmlString;
//            if (window.ActiveXObject){
//                xmlString = xmlData.xml;
//            } else {
//                var oSerializer = new XMLSerializer();
//                xmlString = oSerializer.serializeToString(xmlData[0]);
//            }
//            console.log(xmlString);

            $.ajax({
                headers: {
                    Accept : "text/plain; charset=utf-8"
                },
                /*beforeSend: function(xhr, s) {
                 xhr.setRequestHeader("Accept-Encoding" ,"");
                 xhr.setRequestHeader("Content-Type", "text/xml");
                 },*/

                type: "POST",
                url: "http://localhost:7080/airavata-registry-rest-services/registry/api/applicationdescriptor/build/save/test",
                data: {
                    appName : appName,
                    exeuctableLocation : exeuctableLocation,
                    scratchWorkingDirectory : scratchWorkingDirectory,
                    hostName: hostName,
                    projAccNumber : projAccNumber,
                    queueName : queueName,
                    cpuCount : cpuCount,
                    nodeCount : nodeCount,
                    maxMemory : maxMemory,
                    serviceName : serviceName,
                    inputName1 : inputName1,
                    inputType1 : inputType1,
                    outputName : outputName,
                    outputType : outputType
                }
            }).done(function( msg ) {
                        alert( "Data Saved: " + msg );
                    });

        });
    });
</script>

<style>
    p { background:#b0c4de; font-weight:bold; cursor:pointer;
        padding:5px; }
    p.over { background: #ccc; }
    span { color:red; }
</style>

</body>
</html>
