<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<div ng-controller="ApplicationDescriptor">
  <form name="registerApplicationForm" ng-submit="saveApplicationDescriptor();" ng-hide="isNewDeployment">
    <fieldset>
      <legend>{{regAppFormLegend}}</legend>
      <div class="control-group">
        <label class="control-label" for="inputServiceName">Application Name</label>
        <div class="controls">
          <input type="text" id="inputServiceName" name="ServiceName" placeholder="Service Name" ng-model="serviceDescriptor.serviceName" required>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="tblParameters">Application Parameters</label>
        <div class="controls">
          <div><a href ng-click="serviceDescriptor.parameters.push({})"><i class="icon-plus-sign"> Add Parameter</i></a></div>
          <table style="width: 55%" id="tblParameters" class="table table-striped table-bordered table-hovered table-condensed">
            <thead>
            <tr>
              <th>I/O</th>
              <th>Parameter Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Delete</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="parameter in serviceDescriptor.parameters">
              <td class="span2">
                <select style="width: 80px;" id="parameterIO" name="ParameterIO" ng-model="parameter.io" ng-options="io for io in parameterIO" required>
                  <option value="">-Select-</option>
                </select>
              </td>
              <td class="span3">
                <input type="text" id="inputParameterName" name="ParameterName" placeholder="Parameter Name" ng-model="parameter.name" required>
              </td>
              <td class="span3">
                <select id="parameterType" name="ParameterType" ng-model="parameter.type" ng-options="type for type in parameterType" required>
                  <option value="">-Select-</option>
                </select>
              </td>
              <td class="span3">
                <input type="text" id="parameterDescription" name="ParameterDescription" placeholder="Parameter Description" ng-model="parameter.description">
              </td>
              <td class="span1">
                <a href ng-click="serviceDescriptor.parameters.splice($index, 1)"><i class="icon-remove-sign"></i></a>
              </td>
            </tr>
            </tbody>
          </table>
          <label class="checkbox">
            <input type="checkbox" ng-model="advancedFileStaging"> Advanced: Force input file staging to working directory
          </label>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="tblDeployedApp">Deployments</label>
        <div class="controls">
          <table style="width: 55%" id="tblDeployedApp" class="table table-striped table-bordered table-hovered table-condensed">
            <thead>
            <tr>
              <th>Deployment Name</th>
              <th>Edit</th>
              <th>Delete</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="appDesc in serviceDescriptor.applicationDescriptors">
              <td class="span4">{{appDesc.hostDescName}}</td>
              <td class="span4"><a href ng-click=""><i class="icon-edit-sign"></i></a></td>
              <td class="span4"><a href ng-click="serviceDescriptor.applicationDescriptors.splice($index, 1)"><i class="icon-remove-sign"></i></a></td>
            </tr>
            </tbody>
          </table>
          <label class="checkbox">
            <input type="checkbox" ng-model="isNewDeployment"> New Deployment
          </label>
          <!--a href ng-click="newDeployment();">New Deployment</a-->
        </div>
      </div>
      <div class="control-group">
        <div class="controls">
          <button type="submit" class="btn btn-primary">Register</button>
          <!--button type="submit" ng-disabled="launchWorkflowForm.$invalid" class="btn btn-primary">Run</button-->
          <a class="btn" href="#/exec">Cancel</a>
        </div>
      </div>
    </fieldset>
  </form>
  <form name="newAppDeployFrom" ng-show="isNewDeployment" class="form-horizontal">
    <fieldset>
      <div class="row">
        <div class="span4">
          <legend>{{newAppDeployFromLegend}}</legend>
          <div class="control-group">
            <label class="control-label" for="applicationHost"> Application Host</label>
            <div class="controls">
              <select id="applicationHost"  ng-model="applicationDescriptor.hostDescName" ng-options="host for host in applicationHost" required>
                <option value="">-Select-</option>
              </select>
              <a href="#/exec/addHost" data-toggle="tooltip" data-placement="right" title="Create New Host"><i class="icon-plus-sign"></i></a>
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="executablePath">Executable Path</label>
            <div class="controls">
              <input type="text" id="executablePath" placeholder="Executable Path" ng-model="applicationDescriptor.executablePath" required>
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="scratchWorkingDirectory">Scratch Working Directory</label>
            <div class="controls">
              <input type="text" id="scratchWorkingDirectory" placeholder="Scratch Working Directory" ng-model="applicationDescriptor.workingDir" required>
            </div>
          </div>
          <h6>Locations</h6>
          <div class="control-group">
            <label class="control-label" for="inputDirectory">Input Directory</label>
            <div class="controls">
              <input type="url" id="inputDirectory" placeholder="Input Directory" ng-model="applicationDescriptor.inputDir">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="outputDirectory">Output Directory</label>
            <div class="controls">
              <input type="text" id="outputDirectory" placeholder="Output Directory" ng-model="applicationDescriptor.outputDir">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="staticWorkingDir">Static Working Directory</label>
            <div class="controls">
              <input type="text" id="staticWorkingDir" placeholder="Static Working Directory" ng-model="applicationDescriptor.staticWorkingDir">
            </div>
          </div>
          <h6>Program Data</h6>
          <div class="control-group">
            <label class="control-label" for="inputSTDIN">STDIN</label>
            <div class="controls">
              <input type="url" id="inputSTDIN" placeholder="Standard Input" ng-model="applicationDescriptor.stdIn">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="inputSTDOUT">STDOUT</label>
            <div class="controls">
              <input type="text" id="inputSTDOUT" placeholder="Standard Output" ng-model="applicationDescriptor.stdOut">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="inputSTDERR">STDERR</label>
            <div class="controls">
              <input type="text" id="inputSTDERR" placeholder="Standard Error" ng-model="applicationDescriptor.stdError">
            </div>
          </div>
        </div>
        <div class="span4">
          <!--<legend>Locations</legend>
          <div class="control-group">
            <label class="control-label" for="inputDirectory">Input Directory</label>
            <div class="controls">
              <input type="url" id="inputDirectory" placeholder="Input Directory" ng-model="applicationDescriptor.inputDir">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="outputDirectory">Output Directory</label>
            <div class="controls">
              <input type="text" id="outputDirectory" placeholder="Output Directory" ng-model="applicationDescriptor.outputDir">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label" for="staticWorkingDir">Static Working Directory</label>
            <div class="controls">
              <input type="text" id="staticWorkingDir" placeholder="Static Working Directory" ng-model="applicationDescriptor.staticWorkingDir">
            </div>
          </div>
        --></div>
      </div>
      <div class="row control-group">
        <div class="controls">
          <a href ng-click="addApplicationDeployment();" class="btn btn-primary">Update</a>
          <a href ng-click="isNewDeployment=false" class="btn">Cancel</a>
        </div>
      </div>
    </fieldset>
  </form>
</div>

<!--'environmentVariables':[{name:'',value:''}]
$scope.applicationDescriptor = {
'hostDescName':'Localhost',
'executablePath':'',
'workingDir':'',
'jobType':'',
'projectNumber':'',
'projectDescription':'',
'queueName':'',
'maxWallTime':'',
'cpuCount':'',
'nodeCount':'',
'processorsPerNode':'',
'minMemory':'',
'maxMemory':'',
'
};-->